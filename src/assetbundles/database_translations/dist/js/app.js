/*!
 * @project        Craft Database Translations
 * @name           app.js
 * @author         Digital Pulse
 * @build          Mon, Dec 12, 2022 5:21 PM ET
 * @release        bc876d1a3a83bc3461011584a6eb7411a60c5131 [feature/vue]
 * @copyright      Copyright (c) 2022 digitalpulse
 *
 */!function(t){function e(e){for(var o,n,i=e[0],c=e[1],l=e[2],d=0,f=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&f.push(a[n][0]),a[n]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);for(u&&u(e);f.length;)f.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],o=!0,i=1;i<s.length;i++){var c=s[i];0!==a[c]&&(o=!1)}o&&(r.splice(e--,1),t=n(n.s=s[0]))}return t}var o={},a={0:0},r=[];function n(e){if(o[e])return o[e].exports;var s=o[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=o,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(s,o,function(e){return t[e]}.bind(null,o));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;r.push([6,1]),s()}({6:function(t,e,s){"use strict";s.r(e);var o=s(2),a=s.n(o),r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-nowrap"},[e("div",{staticClass:"flex flex-nowrap"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],attrs:{id:"filter-category"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.category=e.target.multiple?s:s[0]}}},[e("option",{attrs:{value:""}},[t._v("Category")]),t._v(" "),t._l(t.categories,(function(s){return e("option",{domProps:{value:s}},[t._v(t._s(s))])}))],2)]),t._v(" "),e("div",{staticClass:"flex-grow texticon search icon clearable"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"text fullwidth",attrs:{type:"text",placeholder:"search...",autocomplete:"off"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),e("button",{staticClass:"btn submit",on:{click:t.reset}},[t._v("Reset")])]),t._v(" "),e("div",{staticClass:"flex flex-nowrap"},[e("button",{staticClass:"btn submit",on:{click:t.save}},[t._v("Save All")])])])};r._withStripped=!0;var n={methods:{reset:function(){this.category="",this.search=""},save:function(){this.$root.$emit("emit-update")}},mounted:function(){var t=this;this.$root.$on("emit-categories",(function(e){t.categories=e}))},watch:{search:function(t){this.$root.$emit("emit-search",t)},category:function(t){this.$root.$emit("emit-filter-category",t)}},data:function(){return{categories:[],category:"",search:""}}},i=s(0),c=Object(i.a)(n,r,[],!1,null,null,null).exports,l=function(){var t=this,e=t._self._c;return e("table",{staticClass:"data fullwidth"},[e("thead",[e("tr",t._l(t.columns,(function(s){return e("th",{class:{ordered:s.handle==t.column,asc:s.handle==t.column&&"asc"==t.direction,desc:s.handle==t.column&&"desc"==t.direction},domProps:{innerHTML:t._s(s.title)},on:{click:function(e){return t.orderBy(s.handle)}}})})),0)]),t._v(" "),e("tbody",t._l(t.sourceMessages,(function(s){return e("tr",[e("td",{domProps:{innerHTML:t._s(s.category)}}),t._v(" "),e("td",{domProps:{innerHTML:t._s(s.message)}}),t._v(" "),t._l(t.locales,(function(o){return e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:s.messages[o],expression:"sourceMessage.messages[locale]"}],staticClass:"text fullwidth",attrs:{type:"text"},domProps:{value:s.messages[o]},on:{input:function(e){e.target.composing||t.$set(s.messages,o,e.target.value)}}})])})),t._v(" "),e("td",{domProps:{innerHTML:t._s(s.dateCreated)}}),t._v(" "),e("td",{domProps:{innerHTML:t._s(s.dateUpdated)}})],2)})),0)])};l._withStripped=!0;var u={methods:{orderBy:function(t){this.direction=this.column==t&&"asc"==this.direction?"desc":"asc",this.column=t,this.$root.$emit("emit-order-by",this.column,this.direction)},getColumns:function(){var t=[];[{title:"Category",handle:"category"},{title:"Message",handle:"message"}].forEach((function(e){t.push(e)})),this.locales.forEach((function(e){t.push({title:e,handle:e})})),[{title:"Created",handle:"dateCreated"},{title:"Updated",handle:"dateUpdated"}].forEach((function(e){t.push(e)})),this.columns=t}},created:function(){var t=this;this.$root.$on("emit-source-messages",(function(e){t.sourceMessages=e})),this.$root.$on("emit-locales",(function(e){t.locales=e,t.getColumns()})),this.$root.$on("emit-categories",(function(e){t.categories=e}))},data:function(){return{locales:[],columns:[],sourceMessages:[],direction:"asc",column:"category"}}},d=Object(i.a)(u,l,[],!1,null,null,null).exports,f=function(){var t=this._self._c;return t("div",{staticClass:"flex flex-grow"},[t("div",{staticClass:"light flex-grow",attrs:{id:"count-container"}}),this._v(" "),t("div",{staticClass:"flex"},[t("button",{staticClass:"btn",attrs:{type:"button",id:"export-btn"}},[this._v("Export")]),this._v(" "),t("button",{staticClass:"btn submit",on:{click:this.save}},[this._v("Save All")])])])};f._withStripped=!0;var h={methods:{save:function(){this.$root.$emit("emit-update")}}},m=Object(i.a)(h,f,[],!1,null,null,null).exports;new a.a({el:"#main",components:{dashboard:d,filters:c,actions:m},methods:{updateData:function(t){var e=this;axios.post("admin/database-translations/translations/update",{messages:t}).then((function(t){e.sourceMessages=t.data.sourceMessages})).catch((function(t){console.log(t)}))},getData:function(){var t=this;axios.post("database-translations/api/index",{filters:{order:this.column+" "+this.direction,category:this.category,search:this.search}}).then((function(e){for(var s in t.sourceMessages=e.data.sourceMessages,t.sourceMessages)for(var o in 0===t.sourceMessages[s].messages.length&&(t.sourceMessages[s].messages={}),e.data.locales){var a=e.data.locales[o];t.sourceMessages[s].messages.hasOwnProperty(a)||(t.sourceMessages[s].messages[a]=null)}t.$root.$emit("emit-source-messages",t.sourceMessages),t.$root.$emit("emit-locales",e.data.locales),t.$root.$emit("emit-categories",e.data.categories)})).catch((function(t){console.log(t)}))}},created:function(){var t=this;this.getData(),this.$root.$on("emit-order-by",(function(e,s){t.column=e,t.direction=s,t.getData()})),this.$root.$on("emit-filter-category",(function(e){t.category=e,t.getData()})),this.$root.$on("emit-search",(function(e){t.search=e,t.getData()})),this.$root.$on("emit-update",(function(){var e={};t.sourceMessages.forEach((function(t){var s={};for(var o in t.messages)s[o]=t.messages[o];e[t.id]=s})),t.updateData(e)}))},data:function(){return{direction:"asc",column:"category",sourceMessages:[],search:"",category:""}}})}});
//# sourceMappingURL=app.js.map