/*!
 * @project        Craft Database Translations
 * @name           app.js
 * @author         Digital Pulse
 * @build          Thu, Dec 8, 2022 9:15 AM ET
 * @release        541d9ccce5a0f0c8a9a692e0bff8c933f10c3bc6 [feature/vue]
 * @copyright      Copyright (c) 2022 digitalpulse
 *
 */!function(t){function e(e){for(var o,r,i=e[0],c=e[1],l=e[2],d=0,f=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);for(u&&u(e);f.length;)f.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],o=!0,i=1;i<a.length;i++){var c=a[i];0!==s[c]&&(o=!1)}o&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var o={},s={0:0},n=[];function r(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=o,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(a,o,function(e){return t[e]}.bind(null,o));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;n.push([6,1]),a()}({6:function(t,e,a){"use strict";a.r(e);var o=a(2),s=a.n(o),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-nowrap"},[e("div",{staticClass:"flex flex-nowrap"},[e("div",{staticClass:"select"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],attrs:{id:"filter-category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.category=e.target.multiple?a:a[0]}}},[e("option",{attrs:{value:""}},[t._v("Category")]),t._v(" "),t._l(t.categories,(function(a){return e("option",{domProps:{value:a}},[t._v(t._s(a))])}))],2)]),t._v(" "),e("div",{staticClass:"flex-grow texticon search icon clearable"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"text fullwidth",attrs:{type:"text",placeholder:"search...",autocomplete:"off"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),e("button",{staticClass:"btn submit",on:{click:t.reset}},[t._v("Reset")])]),t._v(" "),e("div",{staticClass:"flex flex-nowrap"},[e("button",{staticClass:"btn submit",on:{click:t.save}},[t._v("Save All")])])])};n._withStripped=!0;var r={methods:{reset:function(){this.category="",this.search=""},save:function(){this.$root.$emit("emit-update")}},mounted:function(){var t=this;this.$root.$on("emit-categories",(function(e){t.categories=e}))},watch:{search:function(t){this.$root.$emit("emit-search",t)},category:function(t){this.$root.$emit("emit-filter-category",t)}},data:function(){return{categories:[],category:"",search:""}}},i=a(0),c=Object(i.a)(r,n,[],!1,null,null,null).exports,l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("div",{staticClass:"elements"},[e("div",{staticClass:"tableview tablepane"},[e("form",{attrs:{id:"translations-table",method:"post","accept-charset":"UTF-8",saveshortcut:"","data-confirm-unload":""}},[e("table",{staticClass:"data fullwidth"},[e("thead",[e("tr",t._l(t.columns,(function(a){return e("th",{class:{ordered:a.handle==t.column,asc:a.handle==t.column&&"asc"==t.direction,desc:a.handle==t.column&&"desc"==t.direction},domProps:{innerHTML:t._s(a.title)},on:{click:function(e){return t.orderBy(a.handle)}}})})),0)]),t._v(" "),e("tbody",t._l(t.sourceMessages,(function(a){return e("tr",[e("td",{domProps:{innerHTML:t._s(a.category)}}),t._v(" "),e("td",{domProps:{innerHTML:t._s(a.message)}}),t._v(" "),t._l(a.messages,(function(a){return e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:a.translation,expression:"message.translation"}],staticClass:"text fullwidth",attrs:{type:"text"},domProps:{value:a.translation},on:{input:function(e){e.target.composing||t.$set(a,"translation",e.target.value)}}})])})),t._v(" "),e("td",{domProps:{innerHTML:t._s(a.dateCreated)}}),t._v(" "),e("td",{domProps:{innerHTML:t._s(a.dateUpdated)}})],2)})),0)])])])])])};l._withStripped=!0;var u={methods:{orderBy:function(t){this.direction=this.column==t&&"asc"==this.direction?"desc":"asc",this.column=t,this.$root.$emit("emit-order-by",this.column,this.direction)},getColumns:function(){var t=[];[{title:"Category",handle:"category"},{title:"Message",handle:"message"}].forEach((function(e){t.push(e)})),this.locales.forEach((function(e){t.push({title:e,handle:"language_"+e})})),[{title:"Created",handle:"dateCreated"},{title:"Updated",handle:"dateUpdated"}].forEach((function(e){t.push(e)})),this.columns=t}},created:function(){var t=this;this.$root.$on("emit-source-messages",(function(e){t.sourceMessages=e})),this.$root.$on("emit-locales",(function(e){t.locales=e,t.getColumns()})),this.$root.$on("emit-categories",(function(e){t.categories=e}))},data:function(){return{locales:[],columns:[],sourceMessages:[],direction:"asc",column:"category"}}},d=Object(i.a)(u,l,[],!1,null,null,null).exports,f=function(){var t=this._self._c;return t("div",{staticClass:"flex flex-grow"},[t("div",{staticClass:"light flex-grow",attrs:{id:"count-container"}},[this._v("\n        Pagination\n        ")]),this._v(" "),t("div",{staticClass:"flex"},[t("button",{staticClass:"btn",attrs:{type:"button",id:"export-btn"}},[this._v("Export")]),this._v(" "),t("button",{staticClass:"btn submit",on:{click:this.save}},[this._v("Save All")])])])};f._withStripped=!0;var h={methods:{save:function(){this.$root.$emit("emit-update")}}},p=Object(i.a)(h,f,[],!1,null,null,null).exports;new s.a({el:"#main",components:{dashboard:d,filters:c,actions:p},methods:{updateData:function(t){var e=this;axios.post("admin/database-translations/translations/update",{messages:t}).then((function(t){e.sourceMessages=t.data.sourceMessages})).catch((function(t){console.log(t)}))},getData:function(){var t=this;axios.post("database-translations/api/index",{filters:{order:this.column+" "+this.direction,category:this.category,search:this.search}}).then((function(e){t.sourceMessages=e.data.sourceMessages,t.$root.$emit("emit-source-messages",t.sourceMessages),t.$root.$emit("emit-locales",e.data.locales.reverse()),t.$root.$emit("emit-categories",e.data.categories)})).catch((function(t){console.log(t)}))}},created:function(){var t=this;this.getData(),this.$root.$on("emit-order-by",(function(e,a){t.column=e,t.direction=a,t.getData()})),this.$root.$on("emit-filter-category",(function(e){t.category=e,t.getData()})),this.$root.$on("emit-search",(function(e){t.search=e,t.getData()})),this.$root.$on("emit-update",(function(){var e={};t.sourceMessages.forEach((function(t){var a={};t.messages.forEach((function(t){a[t.language]=t.translation})),e[t.id]=a})),t.updateData(e)}))},data:function(){return{direction:"asc",column:"category",sourceMessages:[],search:"",category:""}}})}});
//# sourceMappingURL=app.js.map